<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:tr="http://myfaces.apache.org/trinidad"
                xmlns:trh="http://myfaces.apache.org/trinidad/html"
                xmlns:c="http://java.sun.com/jstl/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns:ebi="http://ebi.ac.uk/faces/components"
                xmlns:ebisf="http://www.ebi.ac.uk/faces/site">

    <tr:document>
        <trh:body>
            <tr:form id="download">
                <tr:panelHeader id="downloadPanel"
                                text="#{searchBean.selectedService.name} Download">
                </tr:panelHeader>

                <tr:panelGroupLayout>
                    <tr:messages id="errorDownloadMsg"/>
                </tr:panelGroupLayout>

                <tr:spacer height="20px"/>


                <tr:outputText id="selectFormatText" value="Select a format to export the results of the query."/>
                <tr:spacer height="20px"/>
                <tr:selectOneChoice id="downloadSelectOneChoice"
                                    label="Download: "
                                    rendered="#{not clusteringBean.clusterSelected}"
                                    value="#{fileDownload.selectedFormat}"
                                    autoSubmit="true"
                                    required="true"
                                    valueChangeListener="#{fileDownload.selectedFormatChanged}"
                                    unselectedLabel="Select One"
                        >
                    <f:selectItems id="downloadItems" value="#{fileDownload.selectItems}"/>
                </tr:selectOneChoice>


                <tr:selectOneChoice id="downloadClusterSelectOneChoice"
                                    label="Download: "
                                    rendered="#{clusteringBean.clusterSelected}"
                                    value="#{fileDownload.selectedFormat}"
                                    autoSubmit="true"
                                    required="true"
                                    valueChangeListener="#{fileDownload.selectedFormatChanged}"
                                    unselectedLabel="Select One"

                        >
                    <f:selectItems id="downloadClusteredItems" value="#{fileDownload.selectClusteredItems}"/>
                </tr:selectOneChoice>

                <tr:spacer height="20px"/>
                <tr:panelHorizontalLayout id="downloadHorizontalPanel">

                    <tr:commandButton id="binaryDownloadButton"
                                      text="Download"
                                      rendered="#{not clusteringBean.clusterSelected}"
                                      action="#{fileDownload.binaryDownload}"
                            >
                    </tr:commandButton>
                    <tr:commandButton id="clusteredDownloadButton"
                                      text="Download"
                                      rendered="#{clusteringBean.clusterSelected}"
                                      action="#{fileDownload.clusteredDownload}"
                            >
                    </tr:commandButton>
                    <tr:commandButton id="cancelButton"
                                      text="Cancel"
                                      action="#{fileDownload.cancelDialog}"
                                      immediate="true"
                            >
                    </tr:commandButton>

                </tr:panelHorizontalLayout>
            </tr:form>
        </trh:body>
    </tr:document>
</ui:composition>
